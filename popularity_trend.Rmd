---
title: "popularity trend"
author: "Senna"
date: "2024-11-23"
output: github_document
---

```{r}
library(tidyverse)
```

```{r}
spotify_df = readr::read_csv('https://raw.githubusercontent.com/rfordatascience/tidytuesday/master/data/2020/2020-01-21/spotify_songs.csv') |>
  mutate(release_year = as.numeric(format(as.Date(track_album_release_date), "%Y")))
```


```{r}
genre_year = spotify_df|>
  group_by(playlist_genre, release_year)|>
  summarize(release_count = n(),
            avg_pop = mean(track_popularity, na.rm=TRUE))
```

```{r}
ggplot(genre_year, aes(x = release_year, y = release_count, color = playlist_genre)) +
  geom_line() +
  labs(title = "Number of Releases Over Time by Genre",
       x = "Release Year",
       y = "Number of Releases") +
  theme_minimal()
```
```{r}
ggplot(genre_year, aes(x = release_year, y = avg_pop, color = playlist_genre)) +
  geom_smooth()+
  labs(title = "Average Popularity Over Time by Genre",
       x = "Release Year",
       y = "Average Popularity") +
  theme_minimal()
```


Since most songs in the data are released between 2010 and 2020:
```{r}
spotify_10_20 <- spotify_df |>
  filter(release_year >= 2010 & release_year <= 2020)

spotify_10_20  |>
  group_by(playlist_genre, release_year) |>
  summarise(avg_pop = mean(track_popularity, na.rm = TRUE)) |>
  ungroup()|>
  ggplot(aes(x = release_year, y = avg_pop, color = playlist_genre))+
  geom_line()+
  geom_smooth()+
  labs(title = "Average Popularity Over Time by Genre (2010â€“2020)",
       x = "Release Year",
       y = "Average Popularity") +
  theme_minimal()

```











